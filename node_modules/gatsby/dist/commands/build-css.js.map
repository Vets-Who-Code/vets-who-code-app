{"version":3,"sources":["../../src/commands/build-css.js"],"names":["webpack","require","fs","webpackConfig","module","exports","program","directory","compilerConfig","Promise","resolve","reject","run","err","unlinkSync","e","ensureFile"],"mappings":";;;;;;;;;;;;AACA,IAAMA,UAAUC,QAAS,SAAT,CAAhB;AACA,IAAMC,KAAKD,QAAS,UAAT,CAAX;AACA,IAAME,gBAAgBF,QAAS,yBAAT,CAAtB;;AAEAG,OAAOC,OAAP;AAAA,sFAAiB,iBAAOC,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,qBADO,GACOD,OADP,CACPC,SADO;AAAA;AAAA,mBAGcJ,cAAcG,OAAd,EAAuBC,SAAvB,EAAmC,WAAnC,CAHd;;AAAA;AAGTC,0BAHS;AAAA,6CAKR,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCX,sBAAQQ,eAAeE,OAAf,EAAR,EAAkCE,GAAlC,CAAsC,eAAO;AAC3C,oBAAIC,GAAJ,EAAS;AACPF,yBAAOE,GAAP;AACD;;AAED;AACA,oBAAI;AACFX,qBAAGY,UAAH,CAAe,GAAEP,SAAU,2BAA3B;AACD,iBAFD,CAEE,OAAOQ,CAAP,EAAU,CAEX;AADC;;;AAGF;AACA;AACAb,mBAAGc,UAAH,CAAe,GAAET,SAAU,oBAA3B,EAAgD,eAAO;AACrDG,0BAAQG,GAAR;AACD,iBAFD;AAGD,eAjBD;AAkBD,aAnBM,CALQ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAAA;AAAA;AAAA;AAAA","file":"build-css.js","sourcesContent":["/* @flow */\nconst webpack = require(`webpack`)\nconst fs = require(`fs-extra`)\nconst webpackConfig = require(`../utils/webpack.config`)\n\nmodule.exports = async (program: any) => {\n  const { directory } = program\n\n  const compilerConfig = await webpackConfig(program, directory, `build-css`)\n\n  return new Promise((resolve, reject) => {\n    webpack(compilerConfig.resolve()).run(err => {\n      if (err) {\n        reject(err)\n      }\n\n      // We don't want any javascript produced by this step in the process.\n      try {\n        fs.unlinkSync(`${directory}/public/bundle-for-css.js`)\n      } catch (e) {\n        // ignore.\n      }\n\n      // Ensure there's a styles.css file in public so tools that expect it\n      // can find it.\n      fs.ensureFile(`${directory}/public/styles.css`, err => {\n        resolve(err)\n      })\n    })\n  })\n}\n"]}