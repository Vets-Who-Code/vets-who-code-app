{"version":3,"sources":["../../src/utils/webpack.config.js"],"names":["require","store","debug","WebpackMD5Hash","ChunkManifestPlugin","GatsbyModulePlugin","genBabelConfig","withBasePath","HashedChunkIdsPlugin","module","exports","program","directory","suppliedStage","webpackPort","pages","processEnv","output","entry","plugins","resolve","devtool","resolveLoader","root","userLoaderDirectoryPath","statSync","isDirectory","push","e","code","console","log","modulesDirectories","join","__dirname","config","loader","test","exclude","query","babelConfig","loaders","name","limit","stage","merge","postcss","wp","addDependencyTo","browsers","browserslist","extract","getState","extensions","directoryPath","optimize","OccurenceOrderPlugin","HotModuleReplacementPlugin","NoErrorsPlugin","DefinePlugin","__PREFIX_PATHS__","prefixPaths","__PATH_PREFIX__","JSON","stringify","pathPrefix","__POLYFILL__","polyfill","NamedModulesPlugin","clearConsole","paths","allChunks","components","map","page","componentChunkName","IgnorePlugin","CommonsChunkPlugin","chunks","minChunks","count","vendorModuleList","isFramework","regex","RegExp","vendor","resource","filename","manifestVariable","UglifyJsPlugin","compress","screw_ie8","warnings","mangle","comments","Error","commons","host","main","app","path","publicPath","devtoolModuleFilenameTemplate","info","absoluteResourcePath","replace","libraryTarget","chunkFilename","defaultNodeEnv","env","process","NODE_ENV","envFile","cwd","parsed","parse","readFileSync","encoding","envObject","Object","keys","reduce","acc","key","gatsbyVarObject","match","PUBLIC_DIR","assign","babelStage","context","node","__filename","target","profile","validatedConfig"],"mappings":"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","file":"webpack.config.js","sourcesContent":["require(`v8-compile-cache`)\n\nimport { uniq, some } from \"lodash\"\nimport fs from \"fs\"\nimport path from \"path\"\nimport webpack from \"webpack\"\nimport dotenv from \"dotenv\"\nimport Config from \"webpack-configurator\"\nimport ExtractTextPlugin from \"extract-text-webpack-plugin\"\nimport StaticSiteGeneratorPlugin from \"static-site-generator-webpack-plugin\"\nimport { StatsWriterPlugin } from \"webpack-stats-plugin\"\nimport FriendlyErrorsWebpackPlugin from \"friendly-errors-webpack-plugin\"\nimport { cssModulesConfig } from \"gatsby-1-config-css-modules\"\n\n// This isn't working right it seems.\n// import WebpackStableModuleIdAndHash from 'webpack-stable-module-id-and-hash'\nimport webpackModifyValidate from \"./webpack-modify-validate\"\n\nconst { store } = require(`../redux`)\nconst debug = require(`debug`)(`gatsby:webpack-config`)\nconst WebpackMD5Hash = require(`webpack-md5-hash`)\nconst ChunkManifestPlugin = require(`chunk-manifest-webpack-plugin`)\nconst GatsbyModulePlugin = require(`gatsby-module-loader/plugin`)\nconst genBabelConfig = require(`./babel-config`)\nconst { withBasePath } = require(`./path`)\nconst HashedChunkIdsPlugin = require(`./hashed-chunk-ids-plugin`)\n\n// Five stages or modes:\n//   1) develop: for `gatsby develop` command, hot reload and CSS injection into page\n//   2) develop-html: same as develop without react-hmre in the babel config for html renderer\n//   3) build-css: build styles.css file\n//   4) build-html: build all HTML files\n//   5) build-javascript: Build js chunks for Single Page App in production\n\nmodule.exports = async (\n  program,\n  directory,\n  suppliedStage,\n  webpackPort = 1500,\n  pages = []\n) => {\n  const babelStage = suppliedStage\n  const directoryPath = withBasePath(directory)\n\n  // We combine develop & develop-html stages for purposes of generating the\n  // webpack config.\n  const stage = suppliedStage\n  const babelConfig = await genBabelConfig(program, babelStage)\n\n  function processEnv(stage, defaultNodeEnv) {\n    debug(`Building env for \"${stage}\"`)\n    const env = process.env.NODE_ENV\n      ? process.env.NODE_ENV\n      : `${defaultNodeEnv}`\n    const envFile = path.join(process.cwd(), `./.env.${env}`)\n    let parsed = {}\n    try {\n      parsed = dotenv.parse(fs.readFileSync(envFile, { encoding: `utf8` }))\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n    const envObject = Object.keys(parsed).reduce((acc, key) => {\n      acc[key] = JSON.stringify(parsed[key])\n      return acc\n    }, {})\n\n    const gatsbyVarObject = Object.keys(process.env).reduce((acc, key) => {\n      if (key.match(/^GATSBY_/)) {\n        acc[key] = JSON.stringify(process.env[key])\n      }\n      return acc\n    }, {})\n\n    // Don't allow overwriting of NODE_ENV, PUBLIC_DIR as to not break gatsby things\n    envObject.NODE_ENV = JSON.stringify(env)\n    envObject.PUBLIC_DIR = JSON.stringify(`${process.cwd()}/public`)\n\n    return Object.assign(envObject, gatsbyVarObject)\n  }\n\n  debug(`Loading webpack config for stage \"${stage}\"`)\n  function output() {\n    switch (stage) {\n      case `develop`:\n        return {\n          path: directory,\n          filename: `[name].js`,\n          publicPath: `http://${program.host}:${webpackPort}/`,\n          devtoolModuleFilenameTemplate: info =>\n            path.resolve(info.absoluteResourcePath).replace(/\\\\/g, `/`),\n        }\n      case `build-css`:\n        // Webpack will always generate a resultant javascript file.\n        // But we don't want it for this step. Deleted by build-css.js.\n        return {\n          path: directoryPath(`public`),\n          filename: `bundle-for-css.js`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-html`:\n      case `develop-html`:\n        // A temp file required by static-site-generator-plugin. See plugins() below.\n        // Deleted by build-html.js, since it's not needed for production.\n        return {\n          path: directoryPath(`public`),\n          filename: `render-page.js`,\n          libraryTarget: `umd`,\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      case `build-javascript`:\n        return {\n          filename: `[name]-[chunkhash].js`,\n          chunkFilename: `[name]-[chunkhash].js`,\n          path: directoryPath(`public`),\n          publicPath: program.prefixPaths\n            ? `${store.getState().config.pathPrefix}/`\n            : `/`,\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function entry() {\n    switch (stage) {\n      case `develop`:\n        return {\n          commons: [\n            require.resolve(`react-hot-loader/patch`),\n            `${require.resolve(`webpack-hot-middleware/client`)}?path=http://${\n              program.host\n            }:${webpackPort}/__webpack_hmr&reload=true&overlay=false`,\n            directoryPath(`.cache/app`),\n          ],\n        }\n      case `develop-html`:\n        return {\n          main: directoryPath(`.cache/develop-static-entry`),\n        }\n      case `build-css`:\n        return {\n          main: directoryPath(`.cache/app`),\n        }\n      case `build-html`:\n        return {\n          main: directoryPath(`.cache/static-entry`),\n        }\n      case `build-javascript`:\n        return {\n          app: directoryPath(`.cache/production-app`),\n        }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function plugins() {\n    switch (stage) {\n      case `develop`:\n        return [\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new webpack.HotModuleReplacementPlugin(),\n          new webpack.NoErrorsPlugin(),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Names module ids with their filepath. We use this in development\n          // to make it easier to see what modules have hot reloaded, etc. as\n          // the numerical IDs aren't useful. In production we use numerical module\n          // ids to reduce filesize.\n          new webpack.NamedModulesPlugin(),\n          new FriendlyErrorsWebpackPlugin({\n            clearConsole: false,\n            // compilationSuccessInfo: {\n            // messages: [\n            // `You can now view your site in the browser running at http://${program.host}:${program.port}`,\n            // `Your graphql debugger is running at http://${program.host}:${program.port}/___graphql`,\n            // ],\n            // },\n          }),\n        ]\n      case `develop-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `development`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          new ExtractTextPlugin(`build-html-styles.css`),\n        ]\n      case `build-css`:\n        return [\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          new ExtractTextPlugin(`styles.css`, { allChunks: true }),\n        ]\n      case `build-html`:\n        return [\n          new StaticSiteGeneratorPlugin({\n            entry: `render-page.js`,\n            paths: pages,\n          }),\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          new ExtractTextPlugin(`build-html-styles.css`, { allChunks: true }),\n        ]\n      case `build-javascript`: {\n        // Get array of page template component names.\n        let components = store\n          .getState()\n          .pages.map(page => page.componentChunkName)\n        components = uniq(components)\n        return [\n          // Moment.js includes 100s of KBs of extra localization data by\n          // default in Webpack that most sites don't want. This line disables\n          // loading locale modules. This is a practical solution that requires\n          // the user to opt into importing specific locales.\n          // https://github.com/jmblog/how-to-optimize-momentjs-with-webpack\n          new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/),\n          new WebpackMD5Hash(),\n          // new webpack.optimize.DedupePlugin(),\n          // Extract \"commons\" chunk from the app entry and all\n          // page components.\n          new webpack.optimize.CommonsChunkPlugin({\n            name: `commons`,\n            chunks: [`app`, ...components],\n            // The more page components there are, the higher we raise the bar\n            // for merging in page-specific JS libs into the commons chunk. The\n            // two principles here is a) keep the TTI (time to interaction) as\n            // low as possible so that means keeping commons.js small with\n            // critical framework code (e.g. React/react-router) and b) is we\n            // want to push JS parse/eval work as close as possible to when\n            // it's used. Since most people don't navigate to most pages, take\n            // tradeoff of loading/evaling modules multiple times over\n            // loading/evaling lots of unused code on the initial opening of\n            // the app.\n            minChunks: (module, count) => {\n              const vendorModuleList = [\n                `react`,\n                `react-dom`,\n                `fbjs`,\n                `react-router`,\n                `react-router-dom`,\n                `gatsby-react-router-scroll`,\n                `dom-helpers`, // Used in gatsby-react-router-scroll\n                `path-to-regexp`,\n                `isarray`, // Used by path-to-regexp.\n                `scroll-behavior`,\n                `history`,\n                `resolve-pathname`, // Used by history.\n                `value-equal`, // Used by history.\n                `invariant`, // Used by history.\n                `warning`, // Used by history.\n                `babel-runtime`, // Used by history.\n                `core-js`, // Used by history.\n                `loose-envify`, // Used by history.\n                `prop-types`,\n                `gatsby-link`,\n              ]\n              const isFramework = some(\n                vendorModuleList.map(vendor => {\n                  const regex = new RegExp(`/node_modules/${vendor}/.*`, `i`)\n                  return regex.test(module.resource)\n                })\n              )\n              return isFramework || count > 3\n            },\n          }),\n          // Add a few global variables. Set NODE_ENV to production (enables\n          // optimizations for React) and whether prefixing links is enabled\n          // (__PREFIX_PATHS__) and what the link prefix is (__PATH_PREFIX__).\n          new webpack.DefinePlugin({\n            \"process.env\": processEnv(stage, `production`),\n            __PREFIX_PATHS__: program.prefixPaths,\n            __PATH_PREFIX__: JSON.stringify(store.getState().config.pathPrefix),\n            __POLYFILL__: store.getState().config.polyfill,\n          }),\n          // Extract CSS so it doesn't get added to JS bundles.\n          new ExtractTextPlugin(`build-js-styles.css`, { allChunks: true }),\n          // Write out mapping between chunk names and their hashed names. We use\n          // this to add the needed javascript files to each HTML page.\n          new StatsWriterPlugin(),\n          // Extract the webpack chunk manifest out of commons.js so commons.js\n          // doesn't get changed everytime you build. This increases the cache-hit\n          // rate for commons.js.\n          new ChunkManifestPlugin({\n            filename: `chunk-manifest.json`,\n            manifestVariable: `webpackManifest`,\n          }),\n          // Minify Javascript.\n          new webpack.optimize.UglifyJsPlugin({\n            compress: {\n              screw_ie8: true, // React doesn't support IE8\n              warnings: false,\n            },\n            mangle: {\n              screw_ie8: true,\n            },\n            output: {\n              comments: false,\n              screw_ie8: true,\n            },\n          }),\n          // Ensure module order stays the same. Supposibly fixed in webpack 2.0.\n          new webpack.optimize.OccurenceOrderPlugin(),\n          new GatsbyModulePlugin(),\n          // new WebpackStableModuleIdAndHash({ seed: 9, hashSize: 47 }),\n          new HashedChunkIdsPlugin(),\n        ]\n      }\n      default:\n        throw new Error(`The state requested ${stage} doesn't exist.`)\n    }\n  }\n\n  function resolve() {\n    const { program } = store.getState()\n    return {\n      // Use the program's extension list (generated via the\n      // 'resolvableExtensions' API hook).\n      extensions: [``, ...program.extensions],\n      // Default to using the site's node_modules directory to look for\n      // modules. But also make it possible to install modules within the src\n      // directory if you need to install a specific version of a module for a\n      // part of your site.\n      modulesDirectories: [\n        `node_modules`,\n        directoryPath(`node_modules`),\n        directoryPath(`node_modules`, `gatsby`, `node_modules`),\n      ],\n    }\n  }\n\n  function devtool() {\n    switch (stage) {\n      case `develop`:\n        return `cheap-module-source-map`\n      // use a normal `source-map` for the html phases since\n      // it gives better line and column numbers\n      case `develop-html`:\n      case `build-html`:\n      case `build-javascript`:\n        return `source-map`\n      default:\n        return false\n    }\n  }\n\n  function module(config) {\n    // Common config for every env.\n    config.loader(`js`, {\n      test: /\\.jsx?$/, // Accept either .js or .jsx files.\n      exclude: /(node_modules|bower_components)/,\n      loader: `babel`,\n      query: babelConfig,\n    })\n    config.loader(`json`, {\n      test: /\\.json$/,\n      loaders: [`json`],\n    })\n    config.loader(`yaml`, {\n      test: /\\.ya?ml/,\n      loaders: [`json`, `yaml`],\n    })\n\n    // \"file\" loader makes sure those assets end up in the `public` folder.\n    // When you `import` an asset, you get its filename.\n    config.loader(`file-loader`, {\n      test: /\\.(ico|eot|otf|webp|pdf|ttf|woff(2)?)(\\?.*)?$/,\n      loader: `file`,\n      query: {\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n    // \"url\" loader works just like \"file\" loader but it also embeds\n    // assets smaller than specified size as data URLs to avoid requests.\n    config.loader(`url-loader`, {\n      test: /\\.(svg|jpg|jpeg|png|gif|mp4|webm|wav|mp3|m4a|aac|oga)(\\?.*)?$/,\n      loader: `url`,\n      query: {\n        limit: 10000,\n        name: `static/[name].[hash:8].[ext]`,\n      },\n    })\n\n    switch (stage) {\n      case `develop`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loaders: [`style`, `css`, `postcss`],\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loaders: [`style`, cssModulesConfig(stage), `postcss`],\n        })\n\n        config.merge({\n          postcss(wp) {\n            return [\n              require(`postcss-import`)({ addDependencyTo: wp }),\n              require(`postcss-cssnext`)({ browsers: program.browserslist }),\n              require(`postcss-browser-reporter`),\n              require(`postcss-reporter`),\n            ]\n          },\n        })\n        return config\n\n      case `build-css`:\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract([`css?minimize`, `postcss`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n        config.merge({\n          postcss: [\n            require(`postcss-import`)(),\n            require(`postcss-cssnext`)({\n              browsers: program.browserslist,\n            }),\n          ],\n        })\n        return config\n\n      case `build-html`:\n      case `develop-html`:\n        // We don't deal with CSS at all when building the HTML.\n        // The 'null' loader is used to prevent 'module not found' errors.\n        // On the other hand CSS modules loaders are necessary.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          loader: `null`,\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      case `build-javascript`:\n        // we don't deal with css at all when building the javascript.  but\n        // still need to process the css so offline-plugin knows about the\n        // various assets referenced in your css.\n        //\n        // It's also necessary to process CSS Modules so your JS knows the\n        // classNames to use.\n\n        config.loader(`css`, {\n          test: /\\.css$/,\n          exclude: /\\.module\\.css$/,\n          // loader: `null`,\n          loader: ExtractTextPlugin.extract([`css`]),\n        })\n\n        // CSS modules\n        config.loader(`cssModules`, {\n          test: /\\.module\\.css$/,\n          loader: ExtractTextPlugin.extract(`style`, [\n            cssModulesConfig(stage),\n            `postcss`,\n          ]),\n        })\n\n        return config\n\n      default:\n        return config\n    }\n  }\n\n  function resolveLoader() {\n    const root = [path.resolve(directory, `node_modules`)]\n\n    const userLoaderDirectoryPath = path.resolve(directory, `loaders`)\n\n    try {\n      if (fs.statSync(userLoaderDirectoryPath).isDirectory()) {\n        root.push(userLoaderDirectoryPath)\n      }\n    } catch (e) {\n      if (e && e.code !== `ENOENT`) {\n        console.log(e)\n      }\n    }\n\n    return {\n      root,\n      modulesDirectories: [path.join(__dirname, `../loaders`), `node_modules`],\n    }\n  }\n\n  const config = new Config()\n\n  config.merge({\n    // Context is the base directory for resolving the entry option.\n    context: directory,\n    node: {\n      __filename: true,\n    },\n    entry: entry(),\n    debug: true,\n    // Certain \"isomorphic\" packages have different entry points for browser\n    // and server (see\n    // https://github.com/defunctzombie/package-browser-field-spec); setting\n    // the target tells webpack which file to include, ie. browser vs main.\n    target: stage === `build-html` || stage === `develop-html` ? `node` : `web`,\n    profile: stage === `production`,\n    devtool: devtool(),\n    output: output(),\n    resolveLoader: resolveLoader(),\n    plugins: plugins(),\n    resolve: resolve(),\n  })\n\n  module(config, stage)\n\n  // Use the suppliedStage again to let plugins distinguish between\n  // server rendering the html.js and the frontend development config.\n  const validatedConfig = await webpackModifyValidate(config, suppliedStage)\n\n  return validatedConfig\n}\n"]}