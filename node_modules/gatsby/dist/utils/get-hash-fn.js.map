{"version":3,"sources":["../../src/utils/get-hash-fn.js"],"names":["createHash","require","getHashFn","hashFunction","hashDigest","hashDigestBits","cache","Set","hash","update","input","digest","partialDigest","substr","output","parseInt","has","Error","add","module","exports"],"mappings":";;AAAA,IAAMA,aAAaC,QAAS,QAAT,EAAkBD,UAArC;;AAEA,IAAME,YAAY,SAAZA,SAAY;AAAA,+BAChBC,YADgB;AAAA,MAChBA,YADgB,qCACA,KADA;AAAA,6BAEhBC,UAFgB;AAAA,MAEhBA,UAFgB,mCAEF,KAFE;AAAA,iCAGhBC,cAHgB;AAAA,MAGhBA,cAHgB,uCAGC,EAHD;AAAA,wBAIhBC,KAJgB;AAAA,MAIhBA,KAJgB,8BAIR,IAAIC,GAAJ,EAJQ;AAAA,SAKZ,iBAAS;AACb,QAAMC,OAAOR,WAAWG,YAAX,CAAb;AACAK,SAAKC,MAAL,CAAYC,KAAZ;AACA,QAAMC,SAASH,KAAKG,MAAL,CAAYP,UAAZ,CAAf;AACA,QAAMQ,gBAAgBD,OAAOE,MAAP,CAAc,CAAd,EAAiBR,iBAAiB,CAAlC,CAAtB;AACA,QAAMS,SAASC,SAASH,aAAT,EAAwB,EAAxB,CAAf;AACA;AACA,QAAIN,MAAMU,GAAN,CAAUF,MAAV,CAAJ,EAAuB;AACrB,YAAMG,MAAO,uBAAsBP,KAAM,OAAMI,MAAO,EAAhD,CAAN;AACD;AACDR,UAAMY,GAAN,CAAUJ,MAAV;AACA,WAAOA,MAAP;AACD,GAjBiB;AAAA,CAAlB;;AAmBAK,OAAOC,OAAP,GAAiBlB,SAAjB","file":"get-hash-fn.js","sourcesContent":["const createHash = require(`crypto`).createHash\n\nconst getHashFn = ({\n  hashFunction = `md5`,\n  hashDigest = `hex`,\n  hashDigestBits = 48,\n  cache = new Set(),\n}) => input => {\n  const hash = createHash(hashFunction)\n  hash.update(input)\n  const digest = hash.digest(hashDigest)\n  const partialDigest = digest.substr(0, hashDigestBits / 4)\n  const output = parseInt(partialDigest, 16)\n  // guard against collisions\n  if (cache.has(output)) {\n    throw Error(`Hash collision at f(${input}) = ${output}`)\n  }\n  cache.add(output)\n  return output\n}\n\nmodule.exports = getHashFn\n"]}